name: GitHub Actions Demo
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - name: Install PHP
        uses: shivammathur/setup-php@v2
        with:
          tools: composer
      - name: Running composer
        run: composer install
      - name: Running php unit tests
        run: vendor/bin/phpunit  --coverage-clover coverage.clover -c tests/phpunit.xml
      - name: Uploading code coverage to scrutinizer
        run: 
          - wget https://scrutinizer-ci.com/ocular.phar 
          - php ocular.phar code-coverage:upload --format=php-clover coverage.clover
